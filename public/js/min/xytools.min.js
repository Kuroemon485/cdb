!function(o,t,e){function s(t,e){console.log("Processing "+e);var s={};switch(v(),e){case"csv":temp=t.trim().split("\n").slice(1);for(var a=0;a<temp.length;a++){pkm=temp[a];var n=pkm.split(",");switch(box_no=1*n[0].replace("B",""),b_r=n[1],b_c=n[2],pos=b_r+"-"+b_c,void 0==s[box_no]&&(s[box_no]={}),void 0==s[box_no][pos]&&(s[box_no][pos]={}),s[box_no][pos].species=n[3],s[box_no][pos].gender=n[4],s[box_no][pos].nature=n[5],s[box_no][pos].ability=n[6],s[box_no][pos].hp_iv=n[7],s[box_no][pos].atk_iv=n[8],s[box_no][pos].def_iv=n[9],s[box_no][pos].satk_iv=n[10],s[box_no][pos].sdef_iv=n[11],s[box_no][pos].spd_iv=n[12],s[box_no][pos].hp_type=n[13],s[box_no][pos].esv=n[14],s[box_no][pos].tsv=n[15],s[box_no][pos].nname=n[16],s[box_no][pos].ot=n[17],s[box_no][pos].ball=n[18],s[box_no][pos].tid=n[19],s[box_no][pos].sid=n[20],s[box_no][pos].hp_ev=n[21],s[box_no][pos].atk_ev=n[22],s[box_no][pos].def_ev=n[23],s[box_no][pos].satk_ev=n[24],s[box_no][pos].sdef_ev=n[25],s[box_no][pos].spd_ev=n[26],s[box_no][pos].move1=n[27],s[box_no][pos].move2=n[28],s[box_no][pos].move3=n[29],s[box_no][pos].move4=n[30],s[box_no][pos].i_m1=n[31],s[box_no][pos].i_m2=n[32],s[box_no][pos].i_m3=n[33],s[box_no][pos].i_m4=n[34],n[35]){case"★":s[box_no][pos].is_shiny=!0;break;case"":s[box_no][pos].is_shiny=!1}switch(n[36]){case"✓":s[box_no][pos].is_egg=!0;break;case"":s[box_no][pos].is_egg=!1}}break;case"reddit":temp=t.trim().split("\n").slice(4),o.each(temp,function(t,e){pkm=e;var a=o.map(pkm.split("|"),o.trim).slice(0,8);switch(box_no=1*a[0].replace("B",""),pos=a[1].split(",").join("-"),void 0==s[box_no]&&(s[box_no]={}),void 0==s[box_no][pos]&&(s[box_no][pos]={}),s_g=a[2].split(" "),s[box_no][pos].species=s_g[0],s[box_no][pos].gender=s_g[1].charAt(1),s[box_no][pos].nature=a[3],s[box_no][pos].ability=a[4],spread=a[5].replace(/\*\*/g,"").split("."),s[box_no][pos].hp_iv=spread[0],s[box_no][pos].atk_iv=spread[1],s[box_no][pos].def_iv=spread[2],s[box_no][pos].satk_iv=spread[3],s[box_no][pos].sdef_iv=spread[4],s[box_no][pos].spd_iv=spread[5],s[box_no][pos].hp_type=a[6],s[box_no][pos].esv=a[7],a[7]){case"":s[box_no][pos].is_egg=!1;break;default:s[box_no][pos].is_egg=!0}});break;case"default":temp=t.trim().split("\n"),o.each(temp,function(t,e){pkm=e;var a=o.map(pkm.split(" - "),o.trim);switch(box_no=1*a[0].replace("B",""),pos=a[1].split(",").join("-"),void 0==s[box_no]&&(s[box_no]={}),void 0==s[box_no][pos]&&(s[box_no][pos]={}),s_g=a[2].split(" "),s[box_no][pos].species=s_g[0],s[box_no][pos].gender=s_g[1].charAt(1),s[box_no][pos].nature=a[3],s[box_no][pos].ability=a[4],spread=a[5].replace(/\*\*/g,"").split("."),s[box_no][pos].hp_iv=spread[0],s[box_no][pos].atk_iv=spread[1],s[box_no][pos].def_iv=spread[2],s[box_no][pos].satk_iv=spread[3],s[box_no][pos].sdef_iv=spread[4],s[box_no][pos].spd_iv=spread[5],s[box_no][pos].hp_type=a[6],s[box_no][pos].esv=a[7],a[7]){case"":s[box_no][pos].is_egg=!1;break;default:s[box_no][pos].is_egg=!0}})}return localStorage.setItem("boxesData",JSON.stringify(s)),all_boxes=s,s}function a(t){t.stopPropagation(),t.preventDefault();var e=t.target.files[0],s=new FileReader;s.onload=function(t){var e=t.target.result;o("#import-modal textarea").val(e)},s.readAsText(e)}function n(t){switch(t){case"1":o(".to-prev-box").attr("data-to-box","31"),o(".to-next-box").attr("data-to-box","2");break;case"31":o(".to-prev-box").attr("data-to-box","30"),o(".to-next-box").attr("data-to-box","1");break;default:o(".to-prev-box").attr("data-to-box",1*t-1),o(".to-next-box").attr("data-to-box",1*t+1)}p(t),i(),localStorage.setItem("last_box",t)}function i(){return void 0==all_boxes?(console.log("undefined"),void 0):(o.each(all_boxes,function(t){o('#boxes-list-modal [data-to-box="'+t+'"]').empty().append('<img src="'+x+'public/images/filled-box.png"/>')}),o.isEmptyObject(h)||o.each(h,function(t){o('#boxes-list-modal [data-to-box="'+t+'"]').empty().append('<img src="'+x+'public/images/result-box.png"/>')}),void 0)}function p(t){return boxname="Box "+t,o(".poke-box").attr("data-box-num",t),o(".box-title").text(boxname),o(".box-num").text(t),v(),void 0==all_boxes||void 0==all_boxes[t]?(v(),void 0):(box=all_boxes[t],o.each(box,function(t,e){pos=t,species=e.species,image='<img src="'+x+"public/images/minisprites/"+species+'.png" alt="">',o("#"+pos+" button").empty().append(image).addClass("has-pkm")}),o.isEmptyObject(h)||t in h&&o.each(h[t],function(t,e){o("#"+e+" button").addClass("btn-primary")}),i(),void 0)}function l(t,e){void 0!=all_boxes&&void 0!=all_boxes[t]&&void 0!=all_boxes[t][e]&&(pkm=all_boxes[t][e],species=pkm.species,gender="","-"!=pkm.gender&&(gender="♀"==pkm.gender?'<b class="text-red">'+pkm.gender+"</b>":'<b class="text-blue">'+pkm.gender+"</b>"),nature=pkm.nature,ability=pkm.ability,esv=pkm.esv,hp=pkm.hp_type,iv_spread=[],o.each(_,function(o,t){iv_spread[o]=31!=pkm[t+"_iv"]?pkm[t+"_iv"]:'<b class="text-red">31</b>'}),title=species+" "+gender,iv=iv_spread.join("-"),data="<table class='table-condensed'><tr><td>Nature</td><th>"+nature+"</th><td>HP</td><th>"+hp+"</th></tr><tr><td>Ability</td><th colspan='2'>"+ability+"</th></tr><tr><td>IVs Spread</td><th colspan='2'>"+iv+"</th></tr>",pkm.is_egg&&(data+="<tr><td>ESV</td><th colspan='2'>"+esv+"</th></tr>",title='<span class="label label-success">egg</span> '+species+" "+gender),pkm.is_shiny&&(title='<span class="label label-danger">Shiny</span> '+species+" "+gender),data+="</table>",o("#"+e+" button").attr("data-content",data).attr("data-original-title",title))}function b(t,e){switch(f(),pkm=all_boxes[t][e],icon='<img src="'+x+"public/images/minisprites/"+pkm.species+'.png" alt="">',pos="Box "+t+"["+e+"]",modal_title=icon+[pkm.species,pos].join(" - "),o(".modal-title",u).html(modal_title),pkm.is_shiny){case!0:image='<img src="'+x+"public/images/f-sprite-shiny/"+pkm.species+'.gif" alt="">';break;default:image='<img src="'+x+"public/images/f-sprite/"+pkm.species+'.gif" alt="">'}o(".pkball",u).html('<img src="'+x+"public/images/balls/"+pkm.ball+'.png" alt="">'),o(".image",u).html(image),o.each(pkm,function(t,e){switch(e){case"31":o("."+t,u).html('<span class="text-red">'+e+"</span>");break;case"(None)":o("."+t,u).html("-");break;case"♀":o(".gender",u).html('<b class="text-red">'+pkm.gender+"</b>");break;case"♂":o(".gender",u).html('<b class="text-blue">'+pkm.gender+"</b>");break;default:o("."+t,u).html(e)}}),pkm.is_egg&&o(".egg",u).html('<span class="label label-success">egg</span>'),pkm.is_shiny&&o(".shiny",u).html('<span class="label label-danger">shiny</span>')}function r(){return null!=localStorage.getItem("boxesData")?!0:!1}function c(){return null!=localStorage.getItem("last_box")?localStorage.getItem("last_box"):!1}function d(t,e){var s={};return void 0!=all_boxes&&o.each(all_boxes,function(a,n){o.each(n,function(o,n){-1!=n[t].toLowerCase().indexOf(e.toLowerCase())&&(void 0==s[a]&&(s[a]=[]),s[a].push(o))})}),s}function m(){o(".show-info").removeClass("btn-primary"),o('#boxes-list-modal [src*="result-box.png"]').prop("src",x+"public/images/filled-box.png"),o("#result").empty()}o(function(){o("#ccm").on("click",function(){o("#approve-modal").modal("show")}),o("#cld").on("click",function(){k(),o("#approve-modal").modal("hide")}),o('[data-toggle="tooltip"]').tooltip({trigger:"hover",placement:"top"}),o("#faqs-modal .modal-body").slimscroll({height:"400px",size:"5px",alwaysVisible:!0,wheelStep:1,size:"3px"}),o("#result").slimscroll({height:"325px",size:"5px",alwaysVisible:!0,wheelStep:1,size:"3px"}),i(),r()&&(c()?n(c()):n(1)),o(".box-num").on("click",function(){o("#boxes-list-modal").modal("show")}),o("#cim").on("click",function(){o("#import-modal").modal("show")}),o("#cfm").on("click",function(){o("#faqs-modal").modal("show")}),o(".show-info").hover(function(){box=o(".poke-box").attr("data-box-num"),pos=o(this).parent().attr("id"),l(box,pos)}),o(".show-info").on("click",function(t){t.preventDefault(),o(this).hasClass("has-pkm")&&(box=o(".poke-box").attr("data-box-num"),pos=o(this).parent().attr("id"),b(box,pos),o("#pkm-detail-modal").modal("show"))});var t={placement:function(t,e){var s=o(e).position();return s.left>350?"left":s.left<350?"right":s.top<120?"bottom":"top"},animation:!0,selector:!1,trigger:"hover",delay:0,html:!0};o(".show-info").popover(t),o("#impd").on("click",function(){g=o("#import-modal textarea").val(),format=o('[name="format"]:checked').attr("id"),""!=g&&(s(g,format),p(o(".poke-box").attr("data-box-num")),o("#search-input").val().length>=1&&(attrts=o('[name="search-type"]:checked').val(),y(d(attrts,o("#search-input").val()))),i(),o("#import-modal").modal("hide"))}),o(".box-list li a").on("click",function(t){t.preventDefault(),id=o(this).attr("href").replace("#B",""),n(id)}),o(e).on("click",".switch-box",function(){id=o(this).attr("data-to-box"),n(id),o("#boxes-list-modal").modal("hide")}),o("#search-input").on("keyup",function(){o(this).val().length>=1?(attrts=o('[name="search-type"]:checked').val(),y(d(attrts,o(this).val()))):m()}),o('[name="format"]').on("change",function(){switch(o(this).prop("id")){case"csv":console.log("aaa"),o("#get-csv-file").show();break;default:o("#get-csv-file").hide()}})});var x="/cdb/",_=["hp","atk","def","satk","sdef","spd"],h={},g="";all_boxes=o.parseJSON(localStorage.getItem("boxesData"));var u="#pkm-detail-modal",v=function(){o(".show-info img").attr("src",x+"public/images/empty-slot.png"),o(".show-info").removeClass("btn-danger btn-success btn-warning btn-primary"),o(".show-info").attr("data-original-title","Empty slot").attr("data-content","-").removeClass("has-pkm"),o("#boxes-list-modal .switch-box img").attr("src",x+"public/images/empty-box.png")},f=function(){o(".detail",u).html("-")},k=function(){localStorage.removeItem("boxesData"),delete all_boxes,v(),m()};e.getElementById("get-csv-file").addEventListener("change",a,!1);var y=function(t){h=t,result_html="",o.isEmptyObject(t)?result_html='<b class="text-red">Pokemon not found.</b>':o.each(t,function(o){result_html+='<button class="btn btn-primary btn-sm btn-block switch-box" data-to-box="'+o+'" type="button">Box '+o+"</button>"}),o("#result").empty().html(result_html),p(c())}}(window.jQuery,window,document);