!function(t,a,e){base_url="/cdb/";var n=t(".data-table-full"),o=t(".data-table");stats=["hp","atk","def","sp_atk","sp_def","spd"];var d=t(".item-strategy"),i=t("#data-container"),s=t(".data-modal"),l=t(".modal-title"),r=t(".ability"),f=t(".move"),p=t(".item"),c=t('[data-toggle="change-pokemon"]'),u=function(t,a){var e={Adamant:{atk:1.1,sp_atk:.9},Bashful:{all:1},Bold:{def:1.1,atk:.9},Brave:{atk:1.1,spd:.9},Calm:{sp_def:1.1,atk:.9},Careful:{sp_def:1.1,sp_atk:.9},Docile:{all:1},Gentle:{sp_def:1.1,def:.9},Hardy:{all:1},Hasty:{spd:1.1,def:.9},Impish:{def:1.1,sp_atk:.9},Jolly:{spd:1.1,sp_atk:.9},Lax:{def:1.1,sp_def:.9},Lonely:{atk:1.1,def:.9},Mild:{sp_atk:1.1,def:.9},Modest:{sp_atk:1.1,atk:.9},Naive:{spd:1.1,sp_def:.9},Naughty:{atk:1.1,sp_def:.9},Quiet:{sp_atk:1.1,spd:.9},Quirky:{all:1},Rash:{sp_atk:1.1,sp_def:.9},Relaxed:{def:1.1,spd:.9},Sassy:{sp_def:1.1,spd:.9},Serious:{all:1},Timid:{spd:1.1,atk:.9}};return e[t].hasOwnProperty(a)?e[t][a]:1},h=function(){t.each(stats,function(a,e){var n=1*t("#"+e).text();if("hp"==e){var o=Math.floor(2*n+110),d=Math.floor(2*n+31+63+110);t("#min_"+e).text(o),t("#max_"+e).text(d)}else{var i=Math.floor(.9*(2*n+5)),o=Math.floor(2*n+5),d=Math.floor(2*n+31+63+5),s=Math.floor(1.1*(2*n+31+63+5));t("#min_m_"+e).text(i),t("#min_"+e).text(o),t("#max_"+e).text(d),t("#max_p_"+e).text(s)}})},_=function(a){t.each(t(".str-stat"),function(){var e=t(this),n=0,o=t(this).attr("data-nature");t.each(stats,function(t,d){var i=1*e.find("#base_"+d).text(),s=1*e.find("#ev_"+d).text(),l=1*e.find("#iv_"+d).text(),r=u(o,d);"hp"==d?(n=Math.floor((2*i+l+s/4)*a/100+10+1*a),e.find("#total-"+d).text(n)):(n=Math.floor(((2*i+l+s/4)*a/100+5)*r),e.find("#total-"+d).text(n))})})},m=function(a,e){return t.ajax({url:base_url+"common/get_modal_data/",type:"post",dataType:"json",data:{id:a,data_type:e}}).success(function(t){s.modal("show"),i.empty().append(t.html),v(t.title)})},v=function(t){l.empty().append(t)},k=function(a){return t.ajax({url:base_url+"common/get_ab_desc",type:"post",dataType:"html",async:!1,data:{ab_id:a}})};t(function(){t(".selectpicker").selectpicker({style:"btn-sm btn-default",size:"auto",width:"100%",liveSearch:!0,width:"auto"}),n.dataTable({orderMulti:!0,pageLength:50}),o.dataTable({bPaginate:!1,bLengthChange:!1,bFilter:!1,bSort:!0,bInfo:!0}),t(e).on("click",'a[href="#"]',function(t){t.preventDefault()});var i={placement:"top",animation:!0,selector:!1,trigger:"hover",delay:0,html:!0};r.hover(function(){if(""==t(this).attr("data-content")){var a="";a=k(t(this).attr("data-ab-id")).done(function(t){a=t}),t(this).attr("data-content",a.responseText)}}).popover(i),f.popover(i),p.popover(i).click(function(){var a=t(this).attr("data-item-id"),e=t(this).attr("data-input");m(a,e)}),c.on("change",function(e){e.preventDefault(),a.location.replace(t(this).val())}),h(),_(100),t.each(t(".str-stat"),function(){var a=t(this),e=t(this).attr("data-nature");t.each(stats,function(t,n){var o=u(e,n);1.1==o&&a.find("#total-"+n).addClass("text-red"),.9==o&&a.find("#total-"+n).addClass("text-blue")})}),d.on("click",function(a){a.preventDefault();var e=t(this).attr("data-item-id");m(e,"item_strategy")}),t(".calc-stats").on("click",function(){var a=t(this).attr("data-lv");_(a)})})}(window.jQuery,window,document);